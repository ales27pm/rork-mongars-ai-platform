// Top-level build file where you can add configuration options common to all sub-projects/modules.

buildscript {
  repositories {
    // Resolve Gradle plugins from the Gradle Plugin Portal
    gradlePluginPortal()
    google()
    mavenCentral()
    // JetBrains Compose / Kotlin plugin artifacts
    maven { url 'https://maven.pkg.jetbrains.space/public/p/compose/dev' }
    maven { url 'https://plugins.gradle.org/m2/' }
    maven { url 'https://expo.dev/maven/' } // Add Expo Maven repository
  }
  dependencies {
    classpath 'com.android.tools.build:gradle:8.2.2'
    classpath 'com.facebook.react:react-native-gradle-plugin:0.72.0'
    // Add local expo-module-gradle-plugin jar to classpath so node_modules scripts can import its classes
    classpath files('../node_modules/expo-modules-core/expo-module-gradle-plugin/build/libs/expo-module-gradle-plugin.jar')
  }
}

allprojects {
  repositories {
    google()
    mavenCentral()
    // JetBrains Compose / Kotlin plugin artifacts
    maven { url 'https://maven.pkg.jetbrains.space/public/p/compose/dev' }
    maven { url 'https://www.jitpack.io' }
    maven { url 'https://registry.npmjs.org/' }
    // Local React Native Android artifacts (resolved from node_modules)
    maven { url "$rootDir/../node_modules/react-native/android" }
  }
}

ext {
    compileSdkVersion = 36
    buildToolsVersion = "35.0.0"
    minSdkVersion = 24
    targetSdkVersion = 36
    ndkVersion = "26.3.11579264"
    // Preferred CMake version for externalNativeBuild
    cmakeVersion = "3.30.5"
    kotlinVersion = "1.9.10"
  expoLibs = [
    versions: [
      fresco: "2.5.0"
    ]
  ]
}

// The expo-module-gradle-plugin is provided via composite build (includeBuild in settings.gradle)

subprojects {
  afterEvaluate { project ->
    if (project.hasProperty("android")) {
      project.android {
        compileSdkVersion rootProject.ext.compileSdkVersion
        buildToolsVersion rootProject.ext.buildToolsVersion
      }
    }
  }
  repositories {
    google()
    mavenCentral()
    // Local React Native Android artifacts (resolved from node_modules)
    maven { url "$rootDir/../node_modules/react-native/android" }
  }
}

